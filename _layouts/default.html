{% assign is_post = page.date %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="preconnect" href="https://www.google-analytics.com">
    <meta name="author" content="JonLuca DeCaro">
    {% if page.title %}
    <meta content="{{ page.title }}" name='title'/>
    <meta content="{{ page.title }}" name='og:title'/>
    <title>{{ page.title }} - {{ site.title }}</title>
    {% else %}
    <meta content="{{ site.title  | markdownify}}" name='title'/>
    <meta content="{{ site.title  | markdownify}}" name='og:title'/>
    <title>{{ site.title }}</title>
    {% endif %}
    {% if page.header-img %}
    <meta property="og:image" content="{{ site.url }}{{ page.header-img }}"/>
    <meta property="image" content="{{ site.url }}{{ page.header-img }}"/>
    {% endif %}
    <meta name="og:email" content="hi@jonlu.ca"/>
    {% include head.html %}
</head>
<body class="lh-copy dark-gray pa0 f6 sans-serif bg-super-white">
<header class="tc mt4">
    <p>{{ site.title }}</p>
</header>
<div class="width bg-white mt4 mb3 center br2-ns bt bb ba-ns b--light-gray">
    <nav aria-label="Main" class="bb b--light-gray pv4 tc">
        {% for link in site.links %}
        <a class="link blue mh2 pv1"
           href="{% unless link.external %}{{ site.url }}{% endunless %}{{ link.url }}">
            {{ link.name }}
        </a>
        {% endfor %}
    </nav>
    <main class="tl f6 relative pa4 pa5-ns overflow-hidden">
        {% if page.title %}
        <div class="mb4">
            {% if page.date %}
            <div class="fw600 light-silver mt1">{{ page.date | date_to_string }}</div>
            {% endif %}
            <h1 class="ttu f3 mt0 lh-title cb mb2">
                {% if is_post %}
                {% endif %}
                {{ page.title }}
            </h1>
        </div>
        {% endif %}
        <div class="markdown-body">
            {{ content }}
        </div>
        {% if is_post %}
        {% include signoff.html %}
        {% include share.html %}
        {% endif %}
    </main>
</div>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
    dataLayer.push(arguments);
  }

  gtag('js', new Date());
  gtag('config', 'UA-90475221-1');
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker
      .register('/sw.js');
  }
  // matomo
  var _paq = window._paq || [];
  _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
  _paq.push(["setCookieDomain", "*.jonlu.ca"]);
  _paq.push(["setDomains", ["*.jonlu.ca","*.blog.jonlu.ca"]]);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//matomo.jonlu.ca/";
    _paq.push(['setTrackerUrl', u+'js/']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'js/'; s.parentNode.insertBefore(g,s);
  })();
</script>
<script async defer src="/js/preload.js"></script>
</body>
<script async defer src="https://www.googletagmanager.com/gtag/js?id=UA-90475221-1"></script>
<noscript><p><img src="//matomo.jonlu.ca/matomo.php?idsite=1&rec=1" style="border:0;" alt="" /></p></noscript>
</html>
